$bg: hsl(0 0% 2%);
$color: hsl(0 0% 100% / 0.1);
$underline-width: 1lh;
$underline-block-width: 200vmax;
$underline-color: hsl(0 0% 50% / 0.15);
$underline-color-hover: hsl(180 100% 50% / 1);
$underline-transition: 5s;
$finish-fill: $cc-primary-600;
$accent: $cc-primary-600;
$fill: $cc-primary-400;

// .controls {
//   position: fixed;
//   top: 1rem;
//   right: 1rem;
//   padding: 1rem 2rem;
//   border-radius: 100px;
//   z-index: 2;
//   display: flex;
//   align-items: center;
//   gap: 0.5rem;
//   background: hsl(0 0% 90%);
//   color: hsl(0 0% 10%);
// }

.controls {
  border: 3px solid red;
  //   background: hsl(0 0% 90%);
  color: hsl(0 0% 10%);
  height: 200vh;
}

.third-header-container {
  position: sticky;

  top: 0;
  height: 100vh;
  width: 100vw;
  display: grid;
  place-items: center;
}

#new-header {
  font-size: 16px;
  resize: both;
  max-width: 70vw;
  overflow: hidden;

  padding: 10ch;
  margin: 0;
}

#new-header > .new-header-span {
  font-size: 16px;
  outline-color: hsl(10 80% 50%);
  outline-offset: 1ch;
  font-size: clamp(3rem, 4vw + 1rem, 10rem);
  color: $color;
  text-decoration: none;
  background-image: linear-gradient(
      90deg,
      transparent calc(100% - 8ch),
      $accent calc(100% - 8ch)
    ),
    linear-gradient(90deg, $fill, $fill),
    linear-gradient(90deg, $underline-color, $underline-color);
  background-size: $underline-block-width $underline-width,
    $underline-block-width $underline-width, 100% $underline-width;
  background-repeat: no-repeat;
  background-position-x: 0;
  background-position-y: 100%;
  background-clip: text;
  color: $finish-fill;
}

@supports (animation-timeline: scroll()) {
  @media (prefers-reduced-motion: no-preference) {
    .controls {
      view-timeline-name: --section;
    }

    #new-header > .new-header-span {
      background-position-x: calc($underline-block-width * -1),
        calc($underline-block-width * -1), 0;
      color: transparent;
      animation-name: fill-up, color-in;
      animation-fill-mode: both;
      animation-timing-function: linear;
      animation-timeline: --section;
      animation-range: entry 100% cover 50%, cover 50% exit 0%;
    }

    @keyframes fill-up {
      to {
        background-position-x: 0, 0, 0;
      }
    }

    @keyframes color-in {
      to {
        color: $finish-fill;
      }
    }
  }
}
